<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TikTok Pixel TTQ Test (All Events)</title>

  <!-- TikTok Pixel Base Code -->
  <script>
    !function (w, d, t) {
      w.TiktokAnalyticsObject = t;
      var ttq = w[t] = w[t] || [];
      ttq.methods = [
        "page","track","identify","instances","debug","on","off","once","ready",
        "alias","group","enableCookie","disableCookie","holdConsent",
        "revokeConsent","grantConsent"
      ];
      ttq.setAndDefer = function (t, e) {
        t[e] = function () { t.push([e].concat([].slice.call(arguments, 0))) };
      };
      for (var i = 0; i < ttq.methods.length; i++) ttq.setAndDefer(ttq, ttq.methods[i]);
      ttq.instance = function (t) {
        for (var e = ttq._i[t] || [], n = 0; n < ttq.methods.length; n++) ttq.setAndDefer(e, ttq.methods[n]);
        return e;
      };
      ttq.load = function (e, n) {
        var r = "https://analytics.tiktok.com/i18n/pixel/events.js";
        ttq._i = ttq._i || {};
        ttq._i[e] = [];
        ttq._i[e]._u = r;
        ttq._t = ttq._t || {};
        ttq._t[e] = +new Date;
        ttq._o = ttq._o || {};
        ttq._o[e] = n || {};
        var s = d.createElement("script");
        s.type = "text/javascript";
        s.async = true;
        s.src = r + "?sdkid=" + e + "&lib=" + t;
        var x = d.getElementsByTagName("script")[0];
        x.parentNode.insertBefore(s, x);
      };

      ttq.load("CJDTCMJC77U3D7R7E0R0");
      ttq.page();
    }(window, document, "ttq");
  </script>
</head>

<body style="font-family: system-ui, sans-serif; padding: 24px;">
  <h1>TikTok Pixel â€“ Full Event Test</h1>
  <p>All events fire with <strong>event_id = 123456</strong></p>

  <div id="buttons" style="display:flex; gap:10px; flex-wrap:wrap; margin:16px 0;"></div>

  <pre id="log" style="background:#111; color:#0f0; padding:12px; border-radius:8px; white-space:pre-wrap;"></pre>

  <script>
    const EVENT_ID = "123456";

    const standardEvents = [
      "ViewContent",
      "AddToCart",
      "AddToWishlist",
      "InitiateCheckout",
      "AddPaymentInfo",
      "Purchase",
      "CompletePayment",
      "Search",
      "Subscribe",
      "Contact",
      "SubmitForm"
    ];

    const customEvents = Array.from({ length: 10 }, (_, i) => `testcustom${i + 1}`);

    function log(msg) {
      const el = document.getElementById("log");
      el.textContent += msg + "\n";
      console.log(msg);
    }

    function basePayload() {
      return {
        event_id: EVENT_ID,
        contents: [{
          content_id: "301",
          content_name: "dress",
          quantity: 1,
          price: 8
        }],
        content_type: "product",
        value: 8,
        currency: "USD"
      };
    }

    function fireEvent(eventName) {
      if (!window.ttq || typeof window.ttq.track !== "function") {
        log("ttq not ready yet");
        return;
      }
      const payload = basePayload();
      ttq.track(eventName, payload);
      log(`Sent ttq.track("${eventName}", ${JSON.stringify(payload)})`);
    }

    function createButton(label) {
      const btn = document.createElement("button");
      btn.textContent = label;
      btn.style.padding = "10px 14px";
      btn.onclick = () => fireEvent(label);
      return btn;
    }

    const container = document.getElementById("buttons");

    standardEvents.forEach(evt => container.appendChild(createButton(evt)));

    const divider = document.createElement("div");
    divider.style.flexBasis = "100%";
    divider.style.margin = "8px 0";
    container.appendChild(divider);

    customEvents.forEach(evt => container.appendChild(createButton(evt)));
  </script>
</body>
</html>
