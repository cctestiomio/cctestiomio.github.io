<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TikTok Pixel TTQ Test (Exact Event Names)</title>

  <!-- TikTok Pixel Base Code -->
  <script>
    !function (w, d, t) {
      w.TiktokAnalyticsObject = t;
      var ttq = w[t] = w[t] || [];
      ttq.methods = [
        "page","track","identify","instances","debug","on","off","once","ready",
        "alias","group","enableCookie","disableCookie","holdConsent",
        "revokeConsent","grantConsent"
      ];
      ttq.setAndDefer = function (t, e) {
        t[e] = function () { t.push([e].concat([].slice.call(arguments, 0))) };
      };
      for (var i = 0; i < ttq.methods.length; i++) ttq.setAndDefer(ttq, ttq.methods[i]);
      ttq.load = function (e) {
        var s = d.createElement("script");
        s.async = true;
        s.src = "https://analytics.tiktok.com/i18n/pixel/events.js?sdkid=" + e + "&lib=" + t;
        d.head.appendChild(s);
      };
      ttq.load("CJDTCMJC77U3D7R7E0R0");
      ttq.page();
    }(window, document, "ttq");
  </script>
</head>

<body style="font-family: system-ui, sans-serif; padding: 24px;">
  <h1>TikTok Pixel â€“ Event Name Accuracy Test</h1>
  <p>All events fire with <strong>event_id = 123456</strong></p>

  <h3>Standard TikTok Events</h3>
  <div id="standardButtons" style="display:flex; gap:10px; flex-wrap:wrap; margin-bottom:16px;"></div>

  <h3>Custom Events</h3>
  <div id="customButtons" style="display:flex; gap:10px; flex-wrap:wrap; margin-bottom:16px;"></div>

  <pre id="log" style="background:#111; color:#0f0; padding:12px; border-radius:8px; white-space:pre-wrap;"></pre>

  <script>
    const EVENT_ID = "123456";

    // Official TikTok standard event names (case-sensitive)
    const standardEvents = [
      "ViewContent",
      "AddToCart",
      "AddToWishlist",
      "InitiateCheckout",
      "AddPaymentInfo",
      "Purchase",
      "CompletePayment",
      "Search",
      "Subscribe",
      "Contact",
      "SubmitForm"
    ];

    // Custom events with exact casing
    const customEvents = Array.from(
      { length: 10 },
      (_, i) => `Test Custom ${i + 1}`
    );

    function log(msg) {
      const el = document.getElementById("log");
      el.textContent += msg + "\n";
      console.log(msg);
    }

    function payload() {
      return {
        event_id: EVENT_ID,
        contents: [{
          content_id: "301",
          content_name: "dress",
          quantity: 1,
          price: 8
        }],
        content_type: "product",
        value: 8,
        currency: "USD"
      };
    }

    function fireEvent(eventName) {
      if (!window.ttq || typeof window.ttq.track !== "function") {
        log("ttq not ready yet");
        return;
      }
      ttq.track(eventName, payload());
      log(`Sent ttq.track("${eventName}", ${JSON.stringify(payload())})`);
    }

    function createButton(eventName) {
      const btn = document.createElement("button");
      btn.textContent = eventName;
      btn.style.padding = "10px 14px";
      btn.onclick = () => fireEvent(eventName);
      return btn;
    }

    const standardContainer = document.getElementById("standardButtons");
    const customContainer = document.getElementById("customButtons");

    standardEvents.forEach(evt =>
      standardContainer.appendChild(createButton(evt))
    );

    customEvents.forEach(evt =>
      customContainer.appendChild(createButton(evt))
    );
  </script>
</body>
</html>
